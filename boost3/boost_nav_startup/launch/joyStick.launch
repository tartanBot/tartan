<?xml version="1.0"?>
<launch>
<!-- Start joy node -->
	
	<arg name="joy_dev" default="/dev/input/js0" />

	<group ns="joy_teleop">

		<node pkg="joy" type="joy_node" name="joy_node" required="true">
		  <param name="dev" value="$(arg joy_dev)" />
		  <param name="deadzone" value="0.1" />
		  <param name="autorepeat_rate" value="20" />
		</node>

<!-- Start teleop_twist_joy node -->
		<node pkg="teleop_twist_joy" name="teleop_twist_joy" type="teleop_node" required="true">
		  <rosparam command="load" file="$(find boost_config)/config/teleop.config.yaml" />
		</node>

	</group>

<!-- Start twist_mux node -->
	<arg name="joy_vel_in"  default="input_joy/cmd_vel"/>
	<arg name="joy_vel_out" default="joy_vel"/>

	<arg name="cmd_vel_out" default="twist_mux/cmd_vel"/>

	<arg name="config_locks"  default="$(find boost_config)/config/twist_mux/twist_mux_locks.yaml"/>
	<arg name="config_topics" default="$(find boost_config)/config/twist_mux/twist_mux_topics.yaml"/>
	<!-- <arg name="config_joy" default="$(find boost_config)/config/twist_mux/joystick.yaml"/> -->

	<node pkg="twist_mux" type="twist_mux" name="twist_mux" output="screen">
		<remap from="cmd_vel_out" to="$(arg cmd_vel_out)"/>
		<rosparam file="$(arg config_locks)"  command="load"/>
		<rosparam file="$(arg config_topics)" command="load"/>
	</node>

<!-- Launch hebi teleop node -->
	<node pkg="hebi" name="stalker_base_motor_commands" type="stalker_base_motor_commands" required="true" output="screen" >
		<param name="publish_frequency" value="50" />
	</node>
</launch>
